{"ast":null,"code":"/**\n * @author WestLangley / http://github.com/WestLangley\n * @author zz85 / http://github.com/zz85\n * @author bhouston / http://clara.io\n *\n * Creates an arrow for visualizing directions\n *\n * Parameters:\n *  dir - Vector3\n *  origin - Vector3\n *  length - Number\n *  color - color in hex value\n *  headLength - Number\n *  headWidth - Number\n */\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { CylinderBufferGeometry } from '../geometries/CylinderGeometry.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { Line } from '../objects/Line.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nvar _axis = new Vector3();\n\nvar _lineGeometry, _coneGeometry;\n\nfunction ArrowHelper(dir, origin, length, color, headLength, headWidth) {\n  // dir is assumed to be normalized\n  Object3D.call(this);\n  if (dir === undefined) dir = new Vector3(0, 0, 1);\n  if (origin === undefined) origin = new Vector3(0, 0, 0);\n  if (length === undefined) length = 1;\n  if (color === undefined) color = 0xffff00;\n  if (headLength === undefined) headLength = 0.2 * length;\n  if (headWidth === undefined) headWidth = 0.2 * headLength;\n\n  if (_lineGeometry === undefined) {\n    _lineGeometry = new BufferGeometry();\n\n    _lineGeometry.addAttribute('position', new Float32BufferAttribute([0, 0, 0, 0, 1, 0], 3));\n\n    _coneGeometry = new CylinderBufferGeometry(0, 0.5, 1, 5, 1);\n\n    _coneGeometry.translate(0, -0.5, 0);\n  }\n\n  this.position.copy(origin);\n  this.line = new Line(_lineGeometry, new LineBasicMaterial({\n    color: color\n  }));\n  this.line.matrixAutoUpdate = false;\n  this.add(this.line);\n  this.cone = new Mesh(_coneGeometry, new MeshBasicMaterial({\n    color: color\n  }));\n  this.cone.matrixAutoUpdate = false;\n  this.add(this.cone);\n  this.setDirection(dir);\n  this.setLength(length, headLength, headWidth);\n}\n\nArrowHelper.prototype = Object.create(Object3D.prototype);\nArrowHelper.prototype.constructor = ArrowHelper;\n\nArrowHelper.prototype.setDirection = function (dir) {\n  // dir is assumed to be normalized\n  if (dir.y > 0.99999) {\n    this.quaternion.set(0, 0, 0, 1);\n  } else if (dir.y < -0.99999) {\n    this.quaternion.set(1, 0, 0, 0);\n  } else {\n    _axis.set(dir.z, 0, -dir.x).normalize();\n\n    var radians = Math.acos(dir.y);\n    this.quaternion.setFromAxisAngle(_axis, radians);\n  }\n};\n\nArrowHelper.prototype.setLength = function (length, headLength, headWidth) {\n  if (headLength === undefined) headLength = 0.2 * length;\n  if (headWidth === undefined) headWidth = 0.2 * headLength;\n  this.line.scale.set(1, Math.max(0, length - headLength), 1);\n  this.line.updateMatrix();\n  this.cone.scale.set(headWidth, headLength, headWidth);\n  this.cone.position.y = length;\n  this.cone.updateMatrix();\n};\n\nArrowHelper.prototype.setColor = function (color) {\n  this.line.material.color.set(color);\n  this.cone.material.color.set(color);\n};\n\nArrowHelper.prototype.copy = function (source) {\n  Object3D.prototype.copy.call(this, source, false);\n  this.line.copy(source.line);\n  this.cone.copy(source.cone);\n  return this;\n};\n\nArrowHelper.prototype.clone = function () {\n  return new this.constructor().copy(this);\n};\n\nexport { ArrowHelper };","map":null,"metadata":{},"sourceType":"module"}